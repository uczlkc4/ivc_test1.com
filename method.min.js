var signout=function(){$.post("/user/logout.do",{},function(b,a){if(b.status){location.href="/"}})};var onFocus=function(){$("#errorInfo").html("")};var registerSubmit=function(){$.post("/user/register.do",{username:$("#form-username").val(),email:$("#form-email").val(),password:$("#form-password").val()},function(b,a){if(b.status){method.msg_layer(b.info)}else{$("#errorInfo").html(b.error)}})};var loginSubmit=function(){var a={};a.email=$("#form-email").val();a.password=$("#form-password").val();$.post("/user/login.do",{email:$("#form-email").val(),password:$("#form-password").val()},function(c,b){if(c.status){localStorage.setItem("accessToken",JSON.stringify(c.user));if(document.referrer&&document.referrer!==""){location.href="admin/#/welcome"}else{location.href="/"}}else{$("#errorInfo").html(c.error)}})};var comment_parent_id="",comment_parent_name="",comment_parent_email="";var reply=function(c,b,a){comment_parent_id=c;comment_parent_email=b;comment_parent_name=a};var commentSubmit=function(a){$.post("/comment/articleComment.do",{commentOnArticleId:a,commentOriginalCommentId:comment_parent_id,commentOriginalCommentEmail:comment_parent_email,commentOriginalCommentName:comment_parent_name,commentContent:$("#content").val(),commentName:$("#name").val()?$("#name").val():"",commentEmail:$("#email").val()?$("#email").val():""},function(c,b){if(c.status){window.location.reload()}})};var subscribe=function(){$.post("/user/subscribe.do",{email:$(".email").val()},function(b,a){$(".email").val("");method.msg_layer(b.info)})};var joinSubmit=function(){var c={type:"showSweetAlert",title:"IVC Message",content:"<div>Please perfect the information...",area:["400px","auto"],btn:["0","0"]};if($("#name").val()===""){method.msg_layer(c);return}if($("#city").val()===""){method.msg_layer(c);return}if($("#email").val()===""){method.msg_layer(c);return}if($("#infos").val()===""){method.msg_layer(c);return}var b=document.getElementsByName("projectTypes");var g=[];for(i=0;i<b.length;i++){if(b[i].checked){if(b[i].value==="Others"||b[i].value==="其他"){g.push($("#othersTypes").val())}else{g.push(b[i].value)}}}if(g.length===0){method.msg_layer(c);return}var l=g.join("，");var f=document.getElementsByName("skills");var d=[];for(i=0;i<f.length;i++){if(f[i].checked){if(f[i].value==="Others"||f[i].value==="其他"){d.push($("#othersSkills").val())}else{d.push(f[i].value)}}}if(d.length===0){method.msg_layer(c);return}var k=d.join("，");var a=document.getElementsByName("investTime");var o="";for(i=0;i<a.length;i++){if(a[i].checked){o=a[i].value}}if(o.length===0){method.msg_layer(c);return}var e=document.getElementsByName("roles");var j=[];for(i=0;i<e.length;i++){if(e[i].checked){if(e[i].value==="Others"||e[i].value==="其他"){j.push($("#othersRoles").val())}else{j.push(e[i].value)}}}if(j.length===0){method.msg_layer(c);return}var m=j.join("，");if($("#questions").val()===""){method.msg_layer(c);return}var h=$("#info-form");var n=h.clone();n.width(h.width()+"px");n.height(h.height()+"px");$("body").append(n);html2canvas(n,{allowTaint:true,taintTest:false,onrendered:function(p){var q=p.toDataURL("image/png").substring(22);console.log(q);$.post("/user/applyJoin.do",{name:$("#name").val(),city:$("#city").val(),email:$("#email").val(),infos:$("#infos").val(),types:l,skills:k,investTime:o,roles:m,questions:$("#questions").val(),base64Image:q},function(s,r){if(s.status){method.msg_layer(s.info)}else{alert("submit error")}})}})};var supportSubmit=function(){var c={type:"showSweetAlert",title:"IVC Message",content:"<div>Please perfect the information...",area:["400px","auto"],btn:["0","0"]};if($("#name").val()===""){method.msg_layer(c);return}if($("#organization").val()===""){method.msg_layer(c);return}if($("#email").val()===""){method.msg_layer(c);return}if($("#supporting").val()===""){method.msg_layer(c);return}if($("#questions").val()===""){method.msg_layer(c);return}var b=$("#info-form");var a=b.clone();a.width(b.width()+"px");a.height(b.height()+"px");$("body").append(a);html2canvas(a,{allowTaint:true,taintTest:false,onrendered:function(d){var e=d.toDataURL("image/png").substring(22);console.log(e);$.post("/user/applySupport.do",{name:$("#name").val(),organization:$("#organization").val(),email:$("#email").val(),supporting:$("#supporting").val(),questions:$("#questions").val(),base64Image:e},function(g,f){if(g.status){method.msg_layer(g.info)}else{alert("submit error")}})}})};